{"ast":null,"code":"import { LOCALE_ID } from '@angular/core';\nimport { registerLocaleData } from \"@angular/common\";\nimport localeEs from '@angular/common/locales/es';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./service/app.layout.service\";\nimport * as i2 from \"../service/auth/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../app/layout/app.menu.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/avatar\";\nimport * as i7 from \"primeng/button\";\nimport * as i8 from \"./app.menuitem.component\";\nfunction AppMenuComponent_ng_container_33_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"li\", 9);\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    const item_r2 = ctx_r6.$implicit;\n    const i_r3 = ctx_r6.index;\n    i0.ɵɵproperty(\"item\", item_r2)(\"index\", i_r3)(\"root\", true);\n  }\n}\nfunction AppMenuComponent_ng_container_33_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"li\", 10);\n  }\n}\nfunction AppMenuComponent_ng_container_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AppMenuComponent_ng_container_33_li_1_Template, 1, 3, \"li\", 7);\n    i0.ɵɵtemplate(2, AppMenuComponent_ng_container_33_li_2_Template, 1, 0, \"li\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !item_r2.separator);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r2.separator);\n  }\n}\nfunction AppMenuComponent_li_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 11);\n    i0.ɵɵelement(2, \"img\", 12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"assets/layout/images/\", ctx_r1.layoutService.config.colorScheme === \"light\" ? \"banner-primeblocks\" : \"banner-primeblocks-dark\", \".png\", i0.ɵɵsanitizeUrl);\n  }\n}\nconst _c0 = function () {\n  return {\n    \"background-color\": \"#2196F3\",\n    color: \"#ffffff\"\n  };\n};\nregisterLocaleData(localeEs);\nexport class AppMenuComponent {\n  constructor(layoutService, accountService, router, route, authService, menuservice) {\n    this.layoutService = layoutService;\n    this.accountService = accountService;\n    this.router = router;\n    this.route = route;\n    this.authService = authService;\n    this.menuservice = menuservice;\n    this.model = [];\n    this.usersList = [];\n    this.userDetails = null;\n  }\n  ngOnInit() {\n    const userDetails = localStorage.getItem('userDetails');\n    if (userDetails) {\n      this.userDetails = JSON.parse(userDetails);\n    }\n  }\n  loadUserDetails() {\n    const userDetailsJson = localStorage.getItem('userDetails');\n    if (userDetailsJson) {\n      this.userDetails = JSON.parse(userDetailsJson);\n    } else {\n      console.log('No userDetails found in localStorage');\n    }\n  }\n  loadUsersList() {\n    const idUsuario = this.getCurrentidUsuario();\n    this.menuservice.getUsuariosList(idUsuario).subscribe(users => {\n      this.usersList = users;\n    }, error => {\n      console.error('Error loading users list', error);\n      // Manejar el error aquí si es necesario\n    });\n  }\n\n  getCurrentidUsuario() {\n    const userIdString = localStorage.getItem('idUsuario');\n    if (userIdString === null) {\n      console.error('No user ID found in localStorage');\n      this.router.navigate(['/login']);\n      return 0;\n    }\n    return parseInt(userIdString, 10);\n  }\n  cerrarSession() {\n    const idUsuario = this.getCurrentidUsuario();\n    this.authService.logout(idUsuario).subscribe(response => {\n      console.log('Logout successful, navigating to login');\n      this.router.navigateByUrl('/login').then(success => {\n        console.log('Navigation to login successful:', success);\n      }).catch(error => {\n        console.error('Navigation to login failed:', error);\n      });\n    }, error => {\n      console.error('Error during logout', error);\n    });\n  }\n}\nAppMenuComponent.ɵfac = function AppMenuComponent_Factory(t) {\n  return new (t || AppMenuComponent)(i0.ɵɵdirectiveInject(i1.LayoutService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i4.MenuService));\n};\nAppMenuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppMenuComponent,\n  selectors: [[\"app-menu\"]],\n  features: [i0.ɵɵProvidersFeature([{\n    provide: LOCALE_ID,\n    useValue: 'es-ES'\n  } // Configura el locale a español de España\n  ])],\n  decls: 35,\n  vars: 9,\n  consts: [[1, \"layout-menu\"], [1, \"col-12\"], [1, \"flex\", \"justify-content-center\", \"align-items-center\"], [\"label\", \"V\", \"styleClass\", \"mr-2\", \"size\", \"xlarge\", \"shape\", \"circle\"], [\"label\", \"Cerrar Sesi\\u00F3n\", \"icon\", \"pi pi-sign-out\", \"iconPos\", \"left\", \"styleClass\", \"p-button-secondary\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"app-menuitem\", \"\", 3, \"item\", \"index\", \"root\", 4, \"ngIf\"], [\"class\", \"menu-separator\", 4, \"ngIf\"], [\"app-menuitem\", \"\", 3, \"item\", \"index\", \"root\"], [1, \"menu-separator\"], [\"href\", \"https://www.primefaces.org/primeblocks-ng/#/\"], [\"alt\", \"Prime Blocks\", 1, \"w-full\", \"mt-3\", 3, \"src\"]],\n  template: function AppMenuComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ul\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h5\");\n      i0.ɵɵtext(4, \"Usuario:\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 2);\n      i0.ɵɵelement(6, \"p-avatar\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 2)(8, \"b\");\n      i0.ɵɵtext(9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 2)(11, \"h5\");\n      i0.ɵɵtext(12, \"Username: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"p\");\n      i0.ɵɵtext(14);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 2)(16, \"h5\");\n      i0.ɵɵtext(17, \"Usuario:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"p\")(19, \"span\");\n      i0.ɵɵtext(20, \"C\\u00E9dula: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(21);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 2)(23, \"h5\");\n      i0.ɵɵtext(24, \"Usuario:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"p\")(26, \"span\");\n      i0.ɵɵtext(27, \"Correo: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(28);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(29, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 1)(31, \"div\", 2)(32, \"p-button\", 4);\n      i0.ɵɵlistener(\"click\", function AppMenuComponent_Template_p_button_click_32_listener() {\n        return ctx.cerrarSession();\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(33, AppMenuComponent_ng_container_33_Template, 3, 2, \"ng-container\", 5);\n      i0.ɵɵtemplate(34, AppMenuComponent_li_34_Template, 3, 1, \"li\", 6);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(8, _c0));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate((ctx.userDetails == null ? null : ctx.userDetails.personaByPersonaIdPersona2 == null ? null : ctx.userDetails.personaByPersonaIdPersona2.nombres) + \" \" + (ctx.userDetails == null ? null : ctx.userDetails.personaByPersonaIdPersona2 == null ? null : ctx.userDetails.personaByPersonaIdPersona2.apellido) || \"No User Info\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate((ctx.userDetails == null ? null : ctx.userDetails.userName) || \"No disponible\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate((ctx.userDetails == null ? null : ctx.userDetails.personaByPersonaIdPersona2 == null ? null : ctx.userDetails.personaByPersonaIdPersona2.identificacion) || \"No disponible\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate((ctx.userDetails == null ? null : ctx.userDetails.mail) || \"No disponible\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.model);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", false);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.Avatar, i7.Button, i8.AppMenuitemComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["LOCALE_ID","registerLocaleData","localeEs","i0","AppMenuComponent","constructor","layoutService","accountService","router","route","authService","menuservice","ngOnInit","userDetails","localStorage","getItem","JSON","parse","loadUserDetails","userDetailsJson","console","log","loadUsersList","idUsuario","getCurrentidUsuario","getUsuariosList","subscribe","users","usersList","error","userIdString","navigate","parseInt","cerrarSession","logout","response","navigateByUrl","then","success","catch","selectors","features","provide","useValue","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\desta\\Downloads\\FrontEnd\\src\\app\\layout\\app.menu.component.ts","C:\\Users\\desta\\Downloads\\FrontEnd\\src\\app\\layout\\app.menu.component.html"],"sourcesContent":["import {LOCALE_ID, OnInit} from '@angular/core';\nimport {Component} from '@angular/core';\nimport {LayoutService} from './service/app.layout.service';\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {AuthService} from \"../service/auth/auth.service\";\nimport {MenuService} from \"../../app/layout/app.menu.service\";\nimport {UserDetails} from \"../models/user-details.model\";\nimport {registerLocaleData} from \"@angular/common\";\nimport localeEs from '@angular/common/locales/es';\ninterface User {\n    idUsuario: number;\n    userName: string;\n    mail: string;\n    personaByPersonaIdPersona2: {\n        identificacion: string;\n        apellido: string;\n        idPersona: number;\n        nombres: string;\n        fechaNacimiento: string;\n    };\n    rolUsuariosByIdUsuario: any[];\n}\nregisterLocaleData(localeEs);\n@Component({\n    selector: 'app-menu',\n    templateUrl: './app.menu.component.html',\n    providers: [\n        { provide: LOCALE_ID, useValue: 'es-ES' } // Configura el locale a español de España\n    ]\n})\nexport class AppMenuComponent implements OnInit {\n\n    model: any[] = [];\n    usersList: UserDetails[] = [];\n    userDetails: User | null = null;\n\n    constructor(public layoutService: LayoutService,\n                private accountService: AuthService,\n                private router: Router,\n                private route: ActivatedRoute,\n                private authService: AuthService,\n                private menuservice: MenuService) {\n    }\n\n    ngOnInit(): void {\n        const userDetails = localStorage.getItem('userDetails');\n        if (userDetails) {\n            this.userDetails = JSON.parse(userDetails);\n        }\n    }\n\n    loadUserDetails() {\n        const userDetailsJson = localStorage.getItem('userDetails');\n        if (userDetailsJson) {\n            this.userDetails = JSON.parse(userDetailsJson);\n        } else {\n            console.log('No userDetails found in localStorage');\n        }\n    }\n\n    loadUsersList(): void {\n        const idUsuario = this.getCurrentidUsuario();\n        this.menuservice.getUsuariosList(idUsuario).subscribe(\n            (users: UserDetails[]) => {\n                this.usersList = users;\n            },\n            error => {\n                console.error('Error loading users list', error);\n                // Manejar el error aquí si es necesario\n            }\n        );\n    }\n    private getCurrentidUsuario(): number {\n        const userIdString = localStorage.getItem('idUsuario');\n        if (userIdString === null) {\n            console.error('No user ID found in localStorage');\n            this.router.navigate(['/login']);\n            return 0;\n        }\n        return parseInt(userIdString, 10);\n    }\n    cerrarSession(): void {\n        const idUsuario = this.getCurrentidUsuario();\n        this.authService.logout(idUsuario).subscribe(\n            response => {\n                console.log('Logout successful, navigating to login');\n                this.router.navigateByUrl('/login').then(success => {\n                    console.log('Navigation to login successful:', success);\n                }).catch(error => {\n                    console.error('Navigation to login failed:', error);\n                });\n            },\n            error => {\n                console.error('Error during logout', error);\n            }\n        );\n    }\n}\n","<ul class=\"layout-menu\">\n    <div class=\"col-12\">\n        <div class=\"flex justify-content-center align-items-center\">\n            <h5>Usuario:</h5>\n\n        </div>\n        <div class=\"flex justify-content-center align-items-center\">\n            <p-avatar label=\"V\" styleClass=\"mr-2\" size=\"xlarge\" [style]=\"{ 'background-color': '#2196F3', color: '#ffffff' }\" shape=\"circle\"></p-avatar>\n        </div>\n        <div class=\"flex justify-content-center align-items-center\">\n            <b>{{userDetails?.personaByPersonaIdPersona2?.nombres + \" \" + userDetails?.personaByPersonaIdPersona2?.apellido || 'No User Info'}}</b>\n        </div>\n        <div class=\"flex justify-content-center align-items-center\">\n            <h5>Username: </h5>\n            <p>{{ userDetails?.userName || 'No disponible' }}</p>\n        </div>\n        <div class=\"flex justify-content-center align-items-center\">\n            <h5>Usuario:</h5>\n            <p><span>Cédula: </span>{{ userDetails?.personaByPersonaIdPersona2?.identificacion || 'No disponible' }}</p>\n        </div>\n        <div class=\"flex justify-content-center align-items-center\">\n            <h5>Usuario:</h5>\n            <p><span>Correo: </span>{{ userDetails?.mail || 'No disponible' }}</p>\n        </div>\n\n\n        <br>\n\n    </div>\n    <div class=\"col-12\">\n        <div class=\"flex justify-content-center align-items-center\">\n            <p-button label=\"Cerrar Sesión\" icon=\"pi pi-sign-out\" iconPos=\"left\" styleClass=\"p-button-secondary\" (click)=\"cerrarSession()\" ></p-button>\n        </div>\n    </div>\n    <ng-container *ngFor=\"let item of model; let i = index;\">\n        <li app-menuitem *ngIf=\"!item.separator\" [item]=\"item\" [index]=\"i\" [root]=\"true\"></li>\n        <li *ngIf=\"item.separator\" class=\"menu-separator\"></li>\n    </ng-container>\n    <li *ngIf=\"false\" >\n        <a href=\"https://www.primefaces.org/primeblocks-ng/#/\">\n            <img src=\"assets/layout/images/{{layoutService.config.colorScheme === 'light' ? 'banner-primeblocks' : 'banner-primeblocks-dark'}}.png\" alt=\"Prime Blocks\" class=\"w-full mt-3\"/>\n        </a>\n    </li>\n</ul>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}