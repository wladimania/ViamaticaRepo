{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/usermainten/usermaintenance.service\";\nimport * as i2 from \"../../service/auth/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"primeng/panel\";\nimport * as i5 from \"primeng/api\";\nimport * as i6 from \"primeng/table\";\nimport * as i7 from \"primeng/tag\";\nimport * as i8 from \"primeng/inputtext\";\nconst _c0 = [\"dt2\"];\nfunction WelcomeComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"span\", 8);\n    i0.ɵɵelement(2, \"i\", 9);\n    i0.ɵɵelementStart(3, \"input\", 10);\n    i0.ɵɵlistener(\"input\", function WelcomeComponent_ng_template_3_Template_input_input_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.filtrarTabla($event));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction WelcomeComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 11);\n    i0.ɵɵtext(2, \"Nombre de Usuario \");\n    i0.ɵɵelement(3, \"p-sortIcon\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\", 13);\n    i0.ɵɵtext(5, \"Sesi\\u00F3n \");\n    i0.ɵɵelement(6, \"p-sortIcon\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 15);\n    i0.ɵɵtext(8, \"Intentos Fallidos \");\n    i0.ɵɵelement(9, \"p-sortIcon\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 17);\n    i0.ɵɵtext(11, \"Estado \");\n    i0.ɵɵelement(12, \"p-sortIcon\", 18);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction WelcomeComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"p-tag\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"p-tag\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"p-tag\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const user_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r7.userName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", user_r7.sesionActive)(\"severity\", user_r7.sesionActive === \"Activo\" ? \"info\" : \"warning\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", user_r7.intentoFallido);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", user_r7.status)(\"severity\", user_r7.status === \"Activo\" ? \"success\" : \"danger\");\n  }\n}\nfunction WelcomeComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 21);\n    i0.ɵɵtext(2, \"No se han cargado Usuarios.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c1 = function () {\n  return [10, 25, 50];\n};\nconst _c2 = function () {\n  return [\"userName\", \"mail\", \"status\", \"sesionActive\"];\n};\nconst _c3 = function () {\n  return {\n    \"min-width\": \"75rem\"\n  };\n};\nexport class WelcomeComponent {\n  constructor(usermaintenanceService, authService, router) {\n    this.usermaintenanceService = usermaintenanceService;\n    this.authService = authService;\n    this.router = router;\n    this.userDetails = null;\n    this.idUsuario = null;\n    this.usersList = [];\n    this.loading = false;\n  }\n  ngOnInit() {\n    this.loadUserDetails();\n    this.loadUsersList();\n  }\n  filtrarTabla(event) {\n    const valor = event.target.value;\n    this.dt2.filterGlobal(valor, 'contains');\n  }\n  loadUserDetails() {\n    if (this.authService.sessionExists()) {\n      const userInfo = this.authService.getDataUser();\n      this.userDetails = userInfo[0];\n      this.idUsuario = userInfo[1];\n    }\n  }\n  loadUsersList() {\n    this.loading = true;\n    this.usermaintenanceService.getUsuariosList(this.idUsuario).subscribe(users => {\n      users.forEach(user => {\n        user.sesionActive = user.intentoFallido < 5 ? 'Activo' : 'Bloqueado';\n      });\n      this.usersList = users;\n      this.loading = false;\n    }, error => {\n      this.loading = false;\n      console.error('Error loading users list', error);\n      // Manejar el error aquí si es necesario\n    });\n  }\n}\n\nWelcomeComponent.ɵfac = function WelcomeComponent_Factory(t) {\n  return new (t || WelcomeComponent)(i0.ɵɵdirectiveInject(i1.UsermaintenanceService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n};\nWelcomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WelcomeComponent,\n  selectors: [[\"app-welcome\"]],\n  viewQuery: function WelcomeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dt2 = _t.first);\n    }\n  },\n  decls: 7,\n  vars: 11,\n  consts: [[\"header\", \"Lista de Usuarios\"], [\"sortField\", \"userName\", \"sortMode\", \"single\", \"dataKey\", \"idUsuario\", \"currentPageReportTemplate\", \"Mostrando de {first} a {last} de {totalRecords} registros\", 3, \"value\", \"rows\", \"showCurrentPageReport\", \"rowsPerPageOptions\", \"loading\", \"paginator\", \"globalFilterFields\", \"tableStyle\"], [\"dt2\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"emptymessage\"], [1, \"flex\"], [1, \"p-input-icon-left\", \"ml-auto\"], [1, \"pi\", \"pi-search\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Buscar\", 3, \"input\"], [\"pSortableColumn\", \"userName\"], [\"field\", \"userName\"], [\"pSortableColumn\", \"sesionActive\"], [\"field\", \"sesionActive\"], [\"pSortableColumn\", \"intentoFallido\"], [\"field\", \"intentoFallido\"], [\"pSortableColumn\", \"status\"], [\"field\", \"status\"], [3, \"value\", \"severity\"], [\"severity\", \"danger\", 3, \"value\"], [\"colspan\", \"5\"]],\n  template: function WelcomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p-panel\", 0)(1, \"p-table\", 1, 2);\n      i0.ɵɵtemplate(3, WelcomeComponent_ng_template_3_Template, 4, 0, \"ng-template\", 3);\n      i0.ɵɵtemplate(4, WelcomeComponent_ng_template_4_Template, 13, 0, \"ng-template\", 4);\n      i0.ɵɵtemplate(5, WelcomeComponent_ng_template_5_Template, 9, 6, \"ng-template\", 5);\n      i0.ɵɵtemplate(6, WelcomeComponent_ng_template_6_Template, 3, 0, \"ng-template\", 6);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"value\", ctx.usersList)(\"rows\", 10)(\"showCurrentPageReport\", true)(\"rowsPerPageOptions\", i0.ɵɵpureFunction0(8, _c1))(\"loading\", ctx.loading)(\"paginator\", true)(\"globalFilterFields\", i0.ɵɵpureFunction0(9, _c2))(\"tableStyle\", i0.ɵɵpureFunction0(10, _c3));\n    }\n  },\n  dependencies: [i4.Panel, i5.PrimeTemplate, i6.Table, i6.SortableColumn, i6.SortIcon, i7.Tag, i8.InputText],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;IAkBYA,8BAAkB;IAEVA,uBAA4B;IAC5BA,iCAAmF;IAArDA;MAAAA;MAAA;MAAA,OAASA,0CAAoB;IAAA,EAAC;IAA5DA,iBAAmF;;;;;IAK3FA,0BAAI;IAC+BA,kCAC3B;IAAAA,iCAA0C;IAC9CA,iBAAK;IACLA,8BAAmC;IAAAA,4BAC/B;IAAAA,iCAA8C;IAClDA,iBAAK;IACLA,8BAAqC;IAAAA,kCACjC;IAAAA,iCAAgD;IACpDA,iBAAK;IACLA,+BAA6B;IAAAA,wBACzB;IAAAA,kCAAwC;IAC5CA,iBAAK;;;;;IAITA,0BAAI;IACIA,YAAiB;IAAAA,iBAAK;IAC1BA,0BAAI;IACAA,4BAA4G;IAEhHA,iBAAK;IACLA,0BAAI;IACAA,4BAA+D;IACnEA,iBAAK;IACLA,0BAAI;IACAA,4BAAkG;IACtGA,iBAAK;;;;IAVDA,eAAiB;IAAjBA,sCAAiB;IAEVA,eAA2B;IAA3BA,4CAA2B;IAI3BA,eAA6B;IAA7BA,8CAA6B;IAG7BA,eAAqB;IAArBA,sCAAqB;;;;;IAKpCA,0BAAI;IACgBA,2CAA2B;IAAAA,iBAAK;;;;;;;;;;;;;;AC/ChE,OAAM,MAAOC,gBAAgB;EASzBC,YACYC,sBAA8C,EAC9CC,WAAwB,EACxBC,MAAc;IAFd,2BAAsB,GAAtBF,sBAAsB;IACtB,gBAAW,GAAXC,WAAW;IACX,WAAM,GAANC,MAAM;IAVlB,gBAAW,GAAuB,IAAI;IACtC,cAAS,GAAkB,IAAI;IAC/B,cAAS,GAAkB,EAAE;IAC7B,YAAO,GAAY,KAAK;EASxB;EAEAC,QAAQ;IACJ,IAAI,CAACC,eAAe,EAAE;IACtB,IAAI,CAACC,aAAa,EAAE;EACxB;EAEAC,YAAY,CAACC,KAAU;IACnB,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK;IAChC,IAAI,CAACC,GAAG,CAACC,YAAY,CAACJ,KAAK,EAAE,UAAU,CAAC;EAC5C;EAEAJ,eAAe;IACX,IAAI,IAAI,CAACH,WAAW,CAACY,aAAa,EAAE,EAAE;MAClC,MAAMC,QAAQ,GAAG,IAAI,CAACb,WAAW,CAACc,WAAW,EAAG;MAChD,IAAI,CAACC,WAAW,GAAGF,QAAQ,CAAC,CAAC,CAAC;MAC9B,IAAI,CAACG,SAAS,GAAGH,QAAQ,CAAC,CAAC,CAAC;;EAEpC;EAEAT,aAAa;IACT,IAAI,CAACa,OAAO,GAAG,IAAI;IACnB,IAAI,CAAClB,sBAAsB,CAACmB,eAAe,CAAC,IAAI,CAACF,SAAU,CAAC,CAACG,SAAS,CACjEC,KAAoB,IAAI;MACrBA,KAAK,CAACC,OAAO,CAAEC,IAAI,IAAI;QACnBA,IAAI,CAACC,YAAY,GAAGD,IAAI,CAACE,cAAc,GAAG,CAAC,GAAG,QAAQ,GAAG,WAAW;MACxE,CAAC,CAAC;MACF,IAAI,CAACC,SAAS,GAAGL,KAAK;MACtB,IAAI,CAACH,OAAO,GAAG,KAAK;IACxB,CAAC,EACDS,KAAK,IAAG;MACJ,IAAI,CAACT,OAAO,GAAG,KAAK;MACpBU,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD;IACJ,CAAC,CACJ;EACL;;;;mBAlDS7B,gBAAgB;AAAA;;QAAhBA,gBAAgB;EAAA+B;EAAAC;IAAA;;;;;;;;;;;;;MDX7BjC,kCAAoC;MAiB5BA,iFAOc;MACdA,kFAec;MACdA,iFAcc;MACdA,iFAIc;MAClBA,iBAAU;;;MAxDNA,eAAmB;MAAnBA,qCAAmB","names":["i0","WelcomeComponent","constructor","usermaintenanceService","authService","router","ngOnInit","loadUserDetails","loadUsersList","filtrarTabla","event","valor","target","value","dt2","filterGlobal","sessionExists","userInfo","getDataUser","userDetails","idUsuario","loading","getUsuariosList","subscribe","users","forEach","user","sesionActive","intentoFallido","usersList","error","console","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\desta\\Downloads\\FrontEnd\\src\\app\\views\\welcome\\welcome.component.html","C:\\Users\\desta\\Downloads\\FrontEnd\\src\\app\\views\\welcome\\welcome.component.ts"],"sourcesContent":["<p-panel header=\"Lista de Usuarios\">\r\n\r\n\r\n    <p-table\r\n        #dt2\r\n        [value]=\"usersList\"\r\n        sortField=\"userName\" sortMode=\"single\"\r\n        dataKey=\"idUsuario\"\r\n        [rows]=\"10\"\r\n        [showCurrentPageReport]=\"true\"\r\n        [rowsPerPageOptions]=\"[10, 25, 50]\"\r\n        [loading]=\"loading\"\r\n        [paginator]=\"true\"\r\n        currentPageReportTemplate=\"Mostrando de {first} a {last} de {totalRecords} registros\"\r\n        [globalFilterFields]=\"['userName', 'mail', 'status', 'sesionActive']\"\r\n        [tableStyle]=\"{ 'min-width': '75rem' }\"\r\n    >\r\n        <ng-template pTemplate=\"caption\">\r\n            <div class=\"flex\">\r\n                <span class=\"p-input-icon-left ml-auto\">\r\n                    <i class=\"pi pi-search\"></i>\r\n                    <input pInputText type=\"text\" (input)=\"filtrarTabla($event)\" placeholder=\"Buscar\"/>\r\n                </span>\r\n            </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n            <tr>\r\n                <th pSortableColumn=\"userName\">Nombre de Usuario\r\n                    <p-sortIcon field=\"userName\"></p-sortIcon>\r\n                </th>\r\n                <th pSortableColumn=\"sesionActive\">Sesión\r\n                    <p-sortIcon field=\"sesionActive\"></p-sortIcon>\r\n                </th>\r\n                <th pSortableColumn=\"intentoFallido\">Intentos Fallidos\r\n                    <p-sortIcon field=\"intentoFallido\"></p-sortIcon>\r\n                </th>\r\n                <th pSortableColumn=\"status\">Estado\r\n                    <p-sortIcon field=\"status\"></p-sortIcon>\r\n                </th>\r\n            </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-user>\r\n            <tr>\r\n                <td>{{user.userName}}</td>\r\n                <td>\r\n                    <p-tag [value]=\"user.sesionActive\" [severity]=\"user.sesionActive === 'Activo' ? 'info' : 'warning'\"></p-tag>\r\n<!--                    <p-tag [value]=\"user.intentoFallido < 5 ? 'Activo' : 'Bloqueado'\" [severity]=\"user.intentoFallido < 5 ? 'success' : 'warning'\"></p-tag>-->\r\n                </td>\r\n                <td>\r\n                    <p-tag [value]=\"user.intentoFallido\" severity=\"danger\"></p-tag>\r\n                </td>\r\n                <td>\r\n                    <p-tag [value]=\"user.status\" [severity]=\"user.status === 'Activo' ? 'success' : 'danger'\"></p-tag>\r\n                </td>\r\n            </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n                <td colspan=\"5\">No se han cargado Usuarios.</td>\r\n            </tr>\r\n        </ng-template>\r\n    </p-table>\r\n</p-panel>\r\n","import {Component, ViewChild} from '@angular/core';\r\nimport {UserDetails} from \"../../models/user-details.model\";\r\nimport {UsermaintenanceService} from \"../../service/usermainten/usermaintenance.service\";\r\nimport {AuthService} from \"../../service/auth/auth.service\";\r\nimport {Router} from \"@angular/router\";\r\n\r\n@Component({\r\n    selector: 'app-welcome',\r\n    templateUrl: './welcome.component.html',\r\n    styleUrls: ['./welcome.component.scss']\r\n})\r\nexport class WelcomeComponent {\r\n\r\n    userDetails: UserDetails | null = null;\r\n    idUsuario: number | null = null;\r\n    usersList: UserDetails[] = [];\r\n    loading: boolean = false;\r\n\r\n    @ViewChild(\"dt2\") public dt2: any;\r\n\r\n    constructor(\r\n        private usermaintenanceService: UsermaintenanceService,\r\n        private authService: AuthService,\r\n        private router: Router\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.loadUserDetails();\r\n        this.loadUsersList();\r\n    }\r\n\r\n    filtrarTabla(event: any) {\r\n        const valor = event.target.value;\r\n        this.dt2.filterGlobal(valor, 'contains');\r\n    }\r\n\r\n    loadUserDetails() {\r\n        if (this.authService.sessionExists()) {\r\n            const userInfo = this.authService.getDataUser()!;\r\n            this.userDetails = userInfo[0];\r\n            this.idUsuario = userInfo[1];\r\n        }\r\n    }\r\n\r\n    loadUsersList(): void {\r\n        this.loading = true;\r\n        this.usermaintenanceService.getUsuariosList(this.idUsuario!).subscribe(\r\n            (users: UserDetails[]) => {\r\n                users.forEach((user) => {\r\n                    user.sesionActive = user.intentoFallido < 5 ? 'Activo' : 'Bloqueado';\r\n                })\r\n                this.usersList = users;\r\n                this.loading = false;\r\n            },\r\n            error => {\r\n                this.loading = false;\r\n                console.error('Error loading users list', error);\r\n                // Manejar el error aquí si es necesario\r\n            }\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}