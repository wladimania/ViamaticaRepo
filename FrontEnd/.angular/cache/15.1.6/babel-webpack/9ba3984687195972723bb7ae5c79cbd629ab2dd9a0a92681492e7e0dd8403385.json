{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { LOCALE_ID } from '@angular/core';\nimport { Component } from '@angular/core';\nimport { registerLocaleData } from \"@angular/common\";\nimport localeEs from '@angular/common/locales/es';\nregisterLocaleData(localeEs);\nlet AppMenuComponent = class AppMenuComponent {\n  constructor(layoutService, accountService, router, route, authService, menuservice) {\n    this.layoutService = layoutService;\n    this.accountService = accountService;\n    this.router = router;\n    this.route = route;\n    this.authService = authService;\n    this.menuservice = menuservice;\n    this.model = [];\n    this.usersList = [];\n    this.userDetails = null;\n  }\n  ngOnInit() {\n    const userDetails = localStorage.getItem('userDetails');\n    if (userDetails) {\n      this.userDetails = JSON.parse(userDetails);\n    }\n  }\n  loadUserDetails() {\n    const userDetailsJson = localStorage.getItem('userDetails');\n    if (userDetailsJson) {\n      this.userDetails = JSON.parse(userDetailsJson);\n    } else {\n      console.log('No userDetails found in localStorage');\n    }\n  }\n  loadUsersList() {\n    const idUsuario = this.getCurrentidUsuario();\n    this.menuservice.getUsuariosList(idUsuario).subscribe(users => {\n      this.usersList = users;\n    }, error => {\n      console.error('Error loading users list', error);\n      // Manejar el error aquí si es necesario\n    });\n  }\n\n  getCurrentidUsuario() {\n    const userIdString = localStorage.getItem('idUsuario');\n    if (userIdString === null) {\n      console.error('No user ID found in localStorage');\n      this.router.navigate(['/login']);\n      return 0;\n    }\n    return parseInt(userIdString, 10);\n  }\n  cerrarSession() {\n    const idUsuario = this.getCurrentidUsuario();\n    this.authService.logout(idUsuario).subscribe(response => {\n      console.log('Logout successful, navigating to login');\n      this.router.navigateByUrl('/login').then(success => {\n        console.log('Navigation to login successful:', success);\n      }).catch(error => {\n        console.error('Navigation to login failed:', error);\n      });\n    }, error => {\n      console.error('Error during logout', error);\n    });\n  }\n};\nAppMenuComponent = __decorate([Component({\n  selector: 'app-menu',\n  templateUrl: './app.menu.component.html',\n  providers: [{\n    provide: LOCALE_ID,\n    useValue: 'es-ES'\n  } // Configura el locale a español de España\n  ]\n})], AppMenuComponent);\nexport { AppMenuComponent };","map":{"version":3,"mappings":"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","names":["LOCALE_ID","Component","registerLocaleData","localeEs","AppMenuComponent","constructor","layoutService","accountService","router","route","authService","menuservice","ngOnInit","userDetails","localStorage","getItem","JSON","parse","loadUserDetails","userDetailsJson","console","log","loadUsersList","idUsuario","getCurrentidUsuario","getUsuariosList","subscribe","users","usersList","error","userIdString","navigate","parseInt","cerrarSession","logout","response","navigateByUrl","then","success","catch","selector","templateUrl","providers","provide","useValue"],"sourceRoot":"","sources":["C:\\Users\\desta\\Downloads\\FrontEnd\\src\\app\\layout\\app.menu.component.ts"],"sourcesContent":["import {LOCALE_ID, OnInit} from '@angular/core';\nimport {Component} from '@angular/core';\nimport {LayoutService} from './service/app.layout.service';\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {AuthService} from \"../service/auth/auth.service\";\nimport {MenuService} from \"../../app/layout/app.menu.service\";\nimport {UserDetails} from \"../models/user-details.model\";\nimport {registerLocaleData} from \"@angular/common\";\nimport localeEs from '@angular/common/locales/es';\ninterface User {\n    idUsuario: number;\n    userName: string;\n    mail: string;\n    personaByPersonaIdPersona2: {\n        identificacion: string;\n        apellido: string;\n        idPersona: number;\n        nombres: string;\n        fechaNacimiento: string;\n    };\n    rolUsuariosByIdUsuario: any[];\n}\nregisterLocaleData(localeEs);\n@Component({\n    selector: 'app-menu',\n    templateUrl: './app.menu.component.html',\n    providers: [\n        { provide: LOCALE_ID, useValue: 'es-ES' } // Configura el locale a español de España\n    ]\n})\nexport class AppMenuComponent implements OnInit {\n\n    model: any[] = [];\n    usersList: UserDetails[] = [];\n    userDetails: User | null = null;\n\n    constructor(public layoutService: LayoutService,\n                private accountService: AuthService,\n                private router: Router,\n                private route: ActivatedRoute,\n                private authService: AuthService,\n                private menuservice: MenuService) {\n    }\n\n    ngOnInit(): void {\n        const userDetails = localStorage.getItem('userDetails');\n        if (userDetails) {\n            this.userDetails = JSON.parse(userDetails);\n        }\n    }\n\n    loadUserDetails() {\n        const userDetailsJson = localStorage.getItem('userDetails');\n        if (userDetailsJson) {\n            this.userDetails = JSON.parse(userDetailsJson);\n        } else {\n            console.log('No userDetails found in localStorage');\n        }\n    }\n\n    loadUsersList(): void {\n        const idUsuario = this.getCurrentidUsuario();\n        this.menuservice.getUsuariosList(idUsuario).subscribe(\n            (users: UserDetails[]) => {\n                this.usersList = users;\n            },\n            error => {\n                console.error('Error loading users list', error);\n                // Manejar el error aquí si es necesario\n            }\n        );\n    }\n    private getCurrentidUsuario(): number {\n        const userIdString = localStorage.getItem('idUsuario');\n        if (userIdString === null) {\n            console.error('No user ID found in localStorage');\n            this.router.navigate(['/login']);\n            return 0;\n        }\n        return parseInt(userIdString, 10);\n    }\n    cerrarSession(): void {\n        const idUsuario = this.getCurrentidUsuario();\n        this.authService.logout(idUsuario).subscribe(\n            response => {\n                console.log('Logout successful, navigating to login');\n                this.router.navigateByUrl('/login').then(success => {\n                    console.log('Navigation to login successful:', success);\n                }).catch(error => {\n                    console.error('Navigation to login failed:', error);\n                });\n            },\n            error => {\n                console.error('Error during logout', error);\n            }\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}